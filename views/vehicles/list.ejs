<%- include("../layout", { body: `
  <div class='d-flex justify-content-between align-items-center'>
    <h3>Veículos</h3>
    <div class='d-flex gap-2'>
      <form class='d-flex' method='get' action='/vehicles'>
        <input class='form-control form-control-sm' name='q' placeholder='Buscar modelo'>
        <button class='btn btn-sm btn-outline-secondary ms-2'>Buscar</button>
      </form>
      <a class='btn btn-primary' href='/vehicles/new'>Novo</a>
    </div>
  </div>
  <table class='table mt-3'>
    <thead><tr><th>ID</th><th>Placa</th><th>Modelo</th><th>Ano</th><th>Cliente</th><th>Ações</th></tr></thead>
    <tbody>
      ${vehicles.map(v => `
        <tr>
          <td>${v.id}</td>
          <td><a href='/vehicles/${v.id}'>${v.plate}</a></td>
          <td>${v.model}</td>
          <td>${v.year || "-"}</td>
          <td>${v.Client ? v.Client.name : "-"}</td>
          <td class='d-flex gap-2'>
            <a class='btn btn-sm btn-warning' href='/vehicles/${v.id}/edit'>Editar</a>
            <form method='post' action='/vehicles/${v.id}?_method=DELETE' onsubmit='return confirm("Excluir?")'>
              <button class='btn btn-sm btn-danger'>Excluir</button>
            </form>
          </td>
        </tr>
      `).join("")}
    </tbody>
  </table>
  ${pagination ? `<nav><ul class='pagination'>
    ${Array.from({length: pagination.totalPages}, (_,i)=>{
      const p=i+1; const active = p===pagination.page ? "active" : "";
      return `<li class="page-item ${active}"><a class="page-link" href='?page=${p}'>${p}</a></li>`
    }).join('')}
  </ul></nav>` : ""}
` }) %>
