<%- include("../layout", { body: `
  <div class='d-flex justify-content-between align-items-center'>
    <h3 class='mb-0'>
      <i class='bi bi-receipt me-2'></i>${order.id ? "Editar" : "Nova"} Ordem de Serviço
    </h3>
    <a class='btn btn-outline-secondary' href='/orders'>
      <i class='bi bi-arrow-left me-1'></i>Voltar
    </a>
  </div>

  <div class='card shadow-sm rounded-4 mt-3'>
    <div class='card-body'>
      <form method='post' action='${action}' class='row g-3'>
        <div class='col-12'>
          <div class='form-floating'>
            <textarea name='description' class='form-control' style='height: 110px' required>${order.description || ""}</textarea>
            <label><i class='bi bi-file-text me-1'></i>Descrição</label>
          </div>
        </div>

        <div class='col-md-4'>
          <div class='form-floating'>
            <select name='status' class='form-select'>
              ${["aberta","em_andamento","concluida"].map(s => `<option value='${s}' ${order.status===s?"selected":""}>${s.replace("_"," ")}</option>`).join("")}
            </select>
            <label><i class='bi bi-flag me-1'></i>Status</label>
          </div>
        </div>

        <div class='col-md-3'>
          <div class='form-floating'>
            <input type='number' step='0.01' name='cost' class='form-control' value='${order.cost || 0}'>
            <label><i class='bi bi-cash-coin me-1'></i>Custo</label>
          </div>
        </div>

        <div class='col-md-5'>
          <div class='form-floating'>
            <select name='vehicleId' class='form-select' required>
              ${(vehicles || []).map(v => `<option value='${v.id}' ${order.VehicleId===v.id?"selected":""}>${v.plate} - ${v.model} (${v.Client?.name || "-"})</option>`).join("")}
            </select>
            <label><i class='bi bi-car-front me-1'></i>Veículo</label>
          </div>
        </div>

        <div class='col-12 d-flex gap-2 justify-content-end'>
          <a class='btn btn-light' href='/orders'><i class='bi bi-x-lg me-1'></i>Cancelar</a>
          <button class='btn btn-primary'><i class='bi bi-check2-circle me-1'></i>Salvar</button>
        </div>
      </form>
    </div>
  </div>
` }) %>