<%- include("../layout", { 
  body: `
  <div class='d-flex justify-content-between align-items-center'>
    <h3 class='mb-0'>
      <i class='bi bi-people me-2'></i>Clientes
    </h3>
    <a class='btn btn-primary' href='/clients/new'>
      <i class='bi bi-plus-lg me-1'></i>Novo
    </a>
  </div>

  <div class='card shadow-sm rounded-4 mt-3'>
    <div class='card-body'>
      <form method='get' action='/clients' class='mb-3'>
        <div class='input-group'>
          <span class='input-group-text'><i class='bi bi-search'></i></span>
          <input name='q' class='form-control' placeholder='Buscar por nome' value='${typeof q !== "undefined" ? q : ""}'>
          <button class='btn btn-outline-secondary'>Buscar</button>
        </div>
      </form>

      <div class='table-responsive'>
        <table class='table table-hover align-middle'>
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th>Telefone</th>
              <th>Email</th>
              <th class='text-end'>Ações</th>
            </tr>
          </thead>
          <tbody>
            ${clients.length ? clients.map(c => `
              <tr>
                <td>${c.id}</td>
                <td>${c.name}</td>
                <td>${c.phone || "-"}</td>
                <td>${c.email || "-"}</td>
                <td class='text-end'>
                  <a class='btn btn-sm btn-outline-primary' href='/clients/${c.id}'><i class='bi bi-eye'></i></a>
                  <a class='btn btn-sm btn-outline-warning' href='/clients/${c.id}/edit'><i class='bi bi-pencil'></i></a>
                  <form method='post' action='/clients/${c.id}?_method=DELETE' style='display:inline'>
                    <button class='btn btn-sm btn-outline-danger' onclick='return confirm("Excluir cliente?")'><i class='bi bi-trash'></i></button>
                  </form>
                </td>
              </tr>
            `).join("") : `
              <tr><td colspan='5' class='text-center text-muted py-3'>Nenhum cliente encontrado</td></tr>
            `}
          </tbody>
        </table>
      </div>

      ${pagination.totalPages > 1 ? `
        <nav class='mt-3'>
          <ul class='pagination justify-content-center'>
            ${Array.from({ length: pagination.totalPages }, (_, i) => `
              <li class='page-item ${pagination.page === i+1 ? "active" : ""}'>
                <a class='page-link' href='/clients?page=${i+1}${q ? "&q="+encodeURIComponent(q) : ""}'>${i+1}</a>
              </li>
            `).join("")}
          </ul>
        </nav>
      ` : ""}
    </div>
  </div>
  `
}) %>
