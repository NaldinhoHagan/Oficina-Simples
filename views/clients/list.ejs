<%- include("../layout", { 
  title: "Clientes",
  body: `
  <div class="container-fluid py-4" data-bs-theme="dark">
    <div class="row">
      <div class="col-12 col-xl-10 mx-auto">

        <div class="d-flex align-items-center justify-content-between mb-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-people fs-4 me-2"></i>
            <h1 class="h3 text-uppercase m-0">Clientes</h1>
          </div>
          <a href="/clients/new" class="btn btn-primary btn-lg">
            <i class="bi bi-plus-lg me-2"></i>Novo
          </a>
        </div>

        <form method="GET" action="/clients" class="mb-3">
          <div class="input-group input-group-lg">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input type="text" class="form-control" name="q" placeholder="Buscar por nome"
              value="<%%= typeof q !== 'undefined' ? q : '' %%>"/>
            <button class="btn btn-outline-light" type="submit">Buscar</button>
          </div>
        </form>

        <div class="card shadow-sm border-0">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-dark table-hover align-middle m-0">
                <thead>
                  <tr>
                    <th style="width: 80px;">ID</th>
                    <th>Nome</th>
                    <th>Telefone</th>
                    <th>Email</th>
                    <th style="width: 220px;">Ações</th>
                  </tr>
                </thead>
                <tbody>
                  <%% if (clients && clients.length) { %%>
                    <%% clients.forEach(c => { %%>
                      <tr>
                        <td><span class="text-muted">#<%%= c.id %%></span></td>
                        <td class="fw-semibold"><%%= c.name %%></td>
                        <td><%%= c.phone || '-' %%></td>
                        <td><%%= c.email || '-' %%></td>
                        <td>
                          <div class="d-flex gap-2">
                            <a href="/clients/<%%= c.id %%>" class="btn btn-outline-light btn-sm">
                              <i class="bi bi-eye me-1"></i>Ver
                            </a>
                            <a href="/clients/<%%= c.id %%>/edit" class="btn btn-outline-warning btn-sm">
                              <i class="bi bi-pencil me-1"></i>Editar
                            </a>
                            <form method="POST" action="/clients/<%%= c.id %%>?_method=DELETE" 
                              onsubmit="return confirm('Excluir este cliente?')" class="d-inline">
                              <button type="submit" class="btn btn-outline-danger btn-sm">
                                <i class="bi bi-trash3 me-1"></i>Excluir
                              </button>
                            </form>
                          </div>
                        </td>
                      </tr>
                    <%% }) %%>
                  <%% } else { %%>
                    <tr>
                      <td colspan="5" class="text-center text-muted py-4">
                        Nenhum cliente encontrado.
                      </td>
                    </tr>
                  <%% } %%>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <%% if (pagination && pagination.totalPages > 1) { %%>
          <nav class="mt-3">
            <ul class="pagination pagination-lg">
              <%% for (let i = 1; i <= pagination.totalPages; i++) { %%>
                <li class="page-item <%%= i === pagination.page ? 'active' : '' %%>">
                  <a class="page-link" href="/clients?page=<%%= i %%><%%= (typeof q !== 'undefined' && q ? '&q=' + encodeURIComponent(q) : '') %%>"><%%= i %%></a>
                </li>
              <%% } %%>
            </ul>
          </nav>
        <%% } %%>

      </div>
    </div>
  </div>
  `
}) %>
